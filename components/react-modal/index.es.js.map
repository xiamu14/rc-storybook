{"version":3,"file":"index.es.js","sources":["../node_modules/classnames/index.js","../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, {\n  forwardRef,\n  ReactNode,\n  useEffect,\n  useImperativeHandle,\n  useState\n} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport classNames from \"classnames\";\nimport { useSpring, animated } from \"react-spring\";\nimport { EvaCloseOutline } from \"react-icons-eva/eva\";\n\nimport \"./style.scss\";\n\ninterface Props {\n  children?: ReactNode;\n  className?: string;\n  mask?: boolean; // 是否显示底部蒙版\n  header?: boolean; // 是否显示头部\n  duration?: number; // 动画时长\n}\n\nexport interface RefType {\n  show: () => void;\n  hide: () => void;\n}\n\nconst Modal = forwardRef<RefType, Props>((props, ref) => {\n  const { className = \"\", mask = true, duration = 500, header = true } = props;\n  const [isMount, setIsMount] = useState(false);\n\n  const [visible, setVisible] = useState(false);\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  useImperativeHandle(ref, () => ({\n    show: () => {\n      setVisible(true);\n    },\n    hide: () => {\n      handleCancel();\n    }\n  }));\n\n  useEffect(() => {\n    if (visible) {\n      setIsMount(visible);\n    } else {\n      const timer = setTimeout(() => {\n        setIsMount(visible);\n        clearTimeout(timer);\n      }, duration);\n    }\n  }, [duration, visible]);\n\n  const overlayStyle = useSpring({\n    config: { duration: duration / 3 }, // 只取 1/3 的整体动画时长\n    opacity: visible ? 1 : 0\n  });\n\n  const contentStyle = useSpring({\n    config: { duration: (duration / 3) * 2, delay: duration / 1 },\n    transform: `scale(${visible ? 1 : 0})`,\n    opacity: visible ? 1 : 0\n  });\n\n  return isMount\n    ? ReactDOM.createPortal(\n        <React.Fragment>\n          <animated.div\n            className={classNames([\"modal-wrapper\", className])}\n            aria-modal\n            aria-hidden\n            tabIndex={-1}\n            role=\"dialog\"\n            style={overlayStyle}\n          >\n            <div\n              className={classNames({\n                \"modal-overlay\": true,\n                \"modal-mask\": mask\n              })}\n              onClick={handleCancel}\n            ></div>\n            <animated.div style={contentStyle} className=\"modal-animate-box\">\n              <div className=\"modal\">\n                {header ? (\n                  <div className=\"modal-header\">\n                    <div\n                      className=\"modal-close-button\"\n                      data-dismiss=\"modal\"\n                      aria-label=\"Close\"\n                      onClick={handleCancel}\n                    >\n                      <EvaCloseOutline size=\"22px\" color=\"rgba(0,0,0,.75)\" />\n                    </div>\n                  </div>\n                ) : null}\n                <div className=\"modal-content\">\n                  {props.children ? props.children : <p>Hello, I'm a modal.</p>}\n                </div>\n              </div>\n            </animated.div>\n          </animated.div>\n        </React.Fragment>,\n        document.body\n      )\n    : null;\n});\n\nexport default Modal;\n"],"names":["classNames"],"mappings":"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"}